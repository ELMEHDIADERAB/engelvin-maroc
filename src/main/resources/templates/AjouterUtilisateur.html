<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Nouveau Utilisateur</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="../assets/images/favicon.ico" />

    <link rel="stylesheet" href="../assets/css/backend-plugin.min.css">
    <link rel="stylesheet" href="../assets/css/backend.css?v=1.0.0">  </head>
<body class=" color-light ">
<!-- loader Start -->
<div id="loading">
    <div id="loading-center">
    </div>
</div>
<!-- loader END -->
<!-- Wrapper Start -->
<div class="wrapper">
    <div th:replace="header :: header"></div>
    <div class="content-page">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <h3 style="align-items: center;text-align: center"> Nouveau Utilisateur</h3>

                </div>

                <div class="col-lg-12 mt-5">
                    <div th:if="${msgUtilisateurE}" class="alert alert-danger" role="alert">
                        <div class="iq-alert-text"><p th:text="${msgUtilisateurE}"></p></div>
                    </div>
                    <form th:action="@{saveUtilisateur}" method="post" onsubmit="return validateForm()">

                        <div class="form-group">
                            <label for="nom">Nom </label>
                            <input type="text" class="form-control" id="nom" name="nom" placeholder="Nom" required>
                        </div>

                        <div class="form-group">
                            <label for="prenom">Prénom</label>
                            <input type="text" class="form-control" id="prenom" name="prenom"
                                   placeholder="Prénom" required>
                        </div>
                        <div class="form-group">
                            <label for="roles">Rôle</label>
                            <select class="form-control" id="roles" name="roles">
                                <option value="" disabled selected>Choisir un rôle</option>
                                <option th:each="role : ${rolesutilisateursVue}"
                                        th:value="${role.id}"
                                        th:text="${role.nom}">Rôle</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="text" class="form-control" id="email" name="email"
                                   placeholder="Email">
                        </div>
                        <div class="form-group">
                            <label for="password">Mot de passe</label>
                            <input type="password" class="form-control" id="password" name="password"
                                   placeholder="Mot de Passe" required>
                        </div>

                        <button type="submit" class="btn btn-primary">Ajouter</button>
                        <a href="utilisateurs" class="btn bg-danger">Annuler</a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Wrapper End-->
<div th:replace="footer :: footer"></div>
<!-- Backend Bundle JavaScript -->
<script src="../assets/js/backend-bundle.min.js"></script>
<!-- Chart Custom JavaScript -->
<script src="../assets/js/customizer.js"></script>

<script src="../assets/js/sidebar.js"></script>

<!-- Flextree Javascript-->
<script src="../assets/js/flex-tree.min.js"></script>
<script src="../assets/js/tree.js"></script>

<!-- Table Treeview JavaScript -->
<script src="../assets/js/table-treeview.js"></script>

<!-- SweetAlert JavaScript -->
<script src="../assets/js/sweetalert.js"></script>

<!-- Vectoe Map JavaScript -->
<script src="../assets/js/vector-map-custom.js"></script>

<!-- Chart Custom JavaScript -->
<script src="../assets/js/chart-custom.js"></script>
<script src="../assets/js/charts/01.js"></script>
<script src="../assets/js/charts/02.js"></script>

<!-- slider JavaScript -->
<script src="../assets/js/slider.js"></script>

<!-- Emoji picker -->
<script src="../assets/vendor/emoji-picker-element/index.js" type="module"></script>


<!-- app JavaScript -->
<script src="../assets/js/app.js"></script>
<script>
    function validateForm() {
        const nom = document.getElementById('nom').value;
        const prenom = document.getElementById('prenom').value;
        const email = document.getElementById('email').value;
        const regex = /^[a-zA-Z\s]*$/;
        const emailRegex = /^[a-zA-Z]+[a-zA-Z0-9._%+-]*@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;

        if (!regex.test(nom)) {
            alert("Le nom ne doit contenir que des lettres et des espaces.");
            return false;
        }

        if (!regex.test(prenom)) {
            alert("Le prénom ne doit contenir que des lettres et des espaces.");
            return false;
        }
        if (!emailRegex.test(email)) {
            alert("Format de l'email invalide.");
            return false;
        }

        return true;
    }
</script>

</body>
</html>